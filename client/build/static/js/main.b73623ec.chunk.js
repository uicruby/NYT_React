(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,a){e.exports=a(56)},51:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),c=a(15),r=a.n(c),i=a(4),s=a(5),m=a(7),o=a(6),d=a(8),u=a(58),p=a(57),h=a(24),v=a(2),E=a(16),f=a.n(E),g=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(o.a)(t).call(this))).state={searchParams:{},searching:null},e.handleSubmit=e.handleSubmit.bind(Object(v.a)(Object(v.a)(e))),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({searchParams:{topic:this.refs.topic.value,startDate:this.refs.startYear.value?"&begin_date=".concat(f()(new Date(this.refs.startYear.value)).format("YYYYMMDD")):"",endDate:this.refs.endYear.value?"&end_date=".concat(f()(new Date(this.refs.endYear.value)).format("YYYYMMDD")):"",limit:this.refs.numOfRecords.value?this.refs.numOfRecords.value:10}},function(){var e=this;this.props.newQuery(this.state),this.setState({searching:!0},function(){return setTimeout(function(){return e.setState({searching:null})},1200)})})}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"col s12 m12 l6"},n.a.createElement("div",{className:"card-panel"},n.a.createElement("h2",{className:"header center"},"Search for an Article"),n.a.createElement("div",{className:"row"},n.a.createElement("form",{className:"col s12",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"input-field col s12"},n.a.createElement("i",{className:"material-icons prefix"},"search"),n.a.createElement("label",{for:"topic"},"Topic"),n.a.createElement("input",{type:"text",ref:"topic",id:"topic",required:"required",className:"validate"}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"input-field col s12"},n.a.createElement("i",{className:"material-icons prefix"},"format_list_numbered"),n.a.createElement("select",{id:"numOfRecords",ref:"numOfRecords"},n.a.createElement("option",{value:"",disabled:"disabled",selected:"selected"},"Choose your option"),n.a.createElement("option",{value:"1"},"1"),n.a.createElement("option",{value:"5"},"5"),n.a.createElement("option",{value:"10"},"10")))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"input-field col s12"},n.a.createElement("i",{className:"material-icons prefix"},"date_range"),n.a.createElement("label",{for:"startYear"},"Start Year (Optional)"),n.a.createElement("input",{type:"text",ref:"startYear",className:"datepicker",id:"startYear"}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"input-field col s12"},n.a.createElement("i",{className:"material-icons prefix"},"date_range"),n.a.createElement("label",{for:"endYear"},"End Year (Optional)"),n.a.createElement("input",{type:"date",ref:"endYear",className:"datepicker",id:"endYear"}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"input-field col s12"},this.state.searching?n.a.createElement("div",{className:"preloader-wrapper big active right",style:{background:"none"}},n.a.createElement("div",{className:"spinner-layer spinner-blue"},n.a.createElement("div",{className:"circle-clipper left"},n.a.createElement("div",{className:"circle"})),n.a.createElement("div",{className:"gap-patch"},n.a.createElement("div",{className:"circle"})),n.a.createElement("div",{className:"circle-clipper right"},n.a.createElement("div",{className:"circle"}))),n.a.createElement("div",{className:"spinner-layer spinner-red"},n.a.createElement("div",{className:"circle-clipper left"},n.a.createElement("div",{className:"circle"})),n.a.createElement("div",{className:"gap-patch"},n.a.createElement("div",{className:"circle"})),n.a.createElement("div",{className:"circle-clipper right"},n.a.createElement("div",{className:"circle"}))),n.a.createElement("div",{className:"spinner-layer spinner-yellow"},n.a.createElement("div",{className:"circle-clipper left"},n.a.createElement("div",{className:"circle"})),n.a.createElement("div",{className:"gap-patch"},n.a.createElement("div",{className:"circle"})),n.a.createElement("div",{className:"circle-clipper right"},n.a.createElement("div",{className:"circle"}))),n.a.createElement("div",{className:"spinner-layer spinner-green"},n.a.createElement("div",{className:"circle-clipper left"},n.a.createElement("div",{className:"circle"})),n.a.createElement("div",{className:"gap-patch"},n.a.createElement("div",{className:"circle"})),n.a.createElement("div",{className:"circle-clipper right"},n.a.createElement("div",{className:"circle"})))):n.a.createElement("button",{className:"btn cyan waves-effect waves-light right",type:"submit",name:"action"},"Submit",n.a.createElement("i",{className:"mdi-content-send right"})))))))))}}]),t}(l.Component),b=a(12),N=a.n(b),y={search:function(e){return N.a.get("https://api.nytimes.com/svc/search/v2/articlesearch.json?api-key=b9f91d369ff59547cd47b931d8cbc56b:0:74623931&q="+e)},saveArticle:function(e){return N.a.post("/saveArticle",e)},getSavedArticles:function(){return N.a.get("/getSavedArticles")},deleteSavedArticle:function(e){return N.a.delete("/deleteSavedArticle",{data:{articleId:e}})}},O=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(o.a)(t).call(this))).state={saved:null},e.save=e.save.bind(Object(v.a)(Object(v.a)(e))),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"save",value:function(){console.log("Saved Article Clicked");y.saveArticle({articleId:this.props.id,url:this.props.url,title:this.props.title,date:this.props.date,image:this.props.image}).then(this.setState({saved:!0}))}},{key:"render",value:function(){return n.a.createElement("li",{className:"collection-item"},n.a.createElement("img",{className:"img-fluid img-thumbnail rounded right",style:{height:"100px",width:"100px"},src:this.props.image}),n.a.createElement("br",null),n.a.createElement("strong",null," Title: "),"  ",this.props.title,n.a.createElement("br",null),n.a.createElement("strong",null," URL: ")," ",n.a.createElement("a",{href:this.props.url,target:"_blank"}," ",this.props.url," "),this.props.date?n.a.createElement("strong",null,n.a.createElement("br",null),"Date: ".concat(this.props.date)):"",n.a.createElement("br",null),n.a.createElement("strong",null," ID: ")," ",this.props.id,n.a.createElement("br",null),this.state.saved?n.a.createElement("button",{style:{"margin-top":"10px"},id:this.props.id,className:"btn btn-primary right-align"}," Article Saved "):n.a.createElement("button",{style:{"margin-top":"10px"},id:this.props.id,onClick:this.save,className:"btn btn-success right-align"}," Save "))}}]),t}(l.Component),w=function(e){function t(e){return Object(i.a)(this,t),Object(m.a)(this,Object(o.a)(t).call(this,e))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=[];return this.props.results.articles.length>0&&(console.log(JSON.stringify(this.props.results.articles)),e=this.props.results.articles.map(function(e){return n.a.createElement(O,{title:e.title,url:e.url,date:e.date,id:e.articleId,key:e.articleId,image:"".concat(e.image?"https://static01.nyt.com/"+e.image.url:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/450px-No_image_available.svg.png")})})),n.a.createElement("div",null,this.props.results.articles.length>0?n.a.createElement("div",null,n.a.createElement("div",{className:"panel panel-primary"},n.a.createElement("div",{className:"panel-heading"},n.a.createElement("h3",{className:"panel-title"},n.a.createElement("strong",null,n.a.createElement("i",{className:"fa fa-table"})," Results "))),n.a.createElement("div",{className:"panel-body",id:"well-section"},n.a.createElement("ol",{className:"collection with-header"},e)))):n.a.createElement("div",null))}}]),t}(l.Component),j=a(59),k=(a(51),function(e){function t(e){return Object(i.a)(this,t),Object(m.a)(this,Object(o.a)(t).call(this,e))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("nav",null,n.a.createElement("div",{className:"nav-wrapper"},n.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},n.a.createElement("li",null,n.a.createElement("a",{href:"#",className:"brand-logo center customNav"},"New York Times Article Search")),n.a.createElement("li",null,n.a.createElement("a",{onClick:function(){return window.location.replace("/")},style:{"text-decoration":"none"}},"Home")),n.a.createElement("li",null,n.a.createElement(j.a,{to:"/saved",style:{"text-decoration":"none"}},"Saved"))))))}}]),t}(l.Component)),S=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(o.a)(t).call(this))).searchArticles=function(t){y.search(t).then(function(t){var a=[];t.data.response.docs.map(function(e){var t=e.snippet,l=e.web_url,n=e.pub_date,c=e._id,r=e.multimedia;a.push({title:t,url:l,date:n,articleId:c,image:r[2]})}),e.setState(function(t){return{articles:Object(h.a)(t).concat(a).splice(0,e.state.limit)}},console.log(e.state.limit))}).catch(function(e){return console.log(e)})},e.state={articles:[],limit:null},e.newQuery=e.newQuery.bind(Object(v.a)(Object(v.a)(e))),e.searchArticles=e.searchArticles.bind(Object(v.a)(Object(v.a)(e))),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"newQuery",value:function(e){var t=e.searchParams,a=t.topic,l=t.startDate,n=t.endDate,c=t.limit;this.setState({limit:c});var r="".concat(a).concat(l).concat(n);this.searchArticles(r)}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(k,null),n.a.createElement("div",{className:"container"},n.a.createElement(g,{newQuery:this.newQuery}),n.a.createElement(w,{results:this.state})))}}]),t}(l.Component),D=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(o.a)(t).call(this))).state={deleted:null},e.delete=e.delete.bind(Object(v.a)(Object(v.a)(e))),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"delete",value:function(){var e=this;this.setState({deleted:!0},function(){e.props.onDelete(e.props.articleId)})}},{key:"render",value:function(){return n.a.createElement("li",{className:"collection-item"},n.a.createElement("img",{className:"img-fluid img-thumbnail rounded right",style:{height:"100px",width:"100px"},src:this.props.image}),n.a.createElement("br",null),n.a.createElement("strong",null," Title: "),"  ",this.props.title,n.a.createElement("br",null),n.a.createElement("strong",null," URL: ")," ",n.a.createElement("a",{href:this.props.url,target:"_blank"}," ",this.props.url," "),this.props.date?n.a.createElement("strong",null,n.a.createElement("br",null),"Date: ".concat(this.props.date)):"",n.a.createElement("br",null),n.a.createElement("strong",null," ID: ")," ",this.props.articleId,n.a.createElement("br",null),this.state.deleted?n.a.createElement("button",{style:{"margin-top":"10px"},id:this.props.id,className:"btn btn-primary right-align"}," Article Deleted "):n.a.createElement("button",{style:{"margin-top":"10px"},id:this.props.id,onClick:this.delete,className:"btn btn-success right-align"}," Delete "))}}]),t}(l.Component),A=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(o.a)(t).call(this,e))).state={savedArticles:null,articles:null},a.onDelete=a.onDelete.bind(Object(v.a)(Object(v.a)(a))),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"onDelete",value:function(e){var t=this;y.deleteSavedArticle(e).then(function(e){console.log("article delete"),console.log(JSON.stringify(e)),t.setState({articles:e.data.map(function(e){return n.a.createElement(D,{date:e.date,key:e.articleId,articleId:e.articleId,url:e.url,title:e.title,image:e.image,onDelete:t.onDelete})})})})}},{key:"componentDidMount",value:function(){var e=this;y.getSavedArticles().then(function(t){var a=t.data;e.setState({articles:a.map(function(t){return n.a.createElement(D,{date:t.date,key:t.articleId,articleId:t.articleId,url:t.url,title:t.title,image:t.image,onDelete:e.onDelete})})})}).then(this.setState({savedArticles:!0}))}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(k,null),n.a.createElement("div",{className:"container"},this.state.savedArticles?n.a.createElement("div",{style:{"margin-top":"20px"}},n.a.createElement("div",{className:"panel panel-primary"},n.a.createElement("div",{className:"panel-heading"},n.a.createElement("h3",{className:"panel-title"},n.a.createElement("strong",null,n.a.createElement("i",{className:"fa fa-table"})," Results "))),n.a.createElement("div",{className:"panel-body",id:"well-section"},n.a.createElement("ol",{className:"collection with-header"},this.state.articles)))):n.a.createElement("div",{className:"preloader-wrapper big active right",style:{background:"none"}},n.a.createElement("div",{className:"spinner-layer spinner-blue"},n.a.createElement("div",{className:"circle-clipper left"},n.a.createElement("div",{className:"circle"})),n.a.createElement("div",{className:"gap-patch"},n.a.createElement("div",{className:"circle"})),n.a.createElement("div",{className:"circle-clipper right"},n.a.createElement("div",{className:"circle"}))),n.a.createElement("div",{className:"spinner-layer spinner-red"},n.a.createElement("div",{className:"circle-clipper left"},n.a.createElement("div",{className:"circle"})),n.a.createElement("div",{className:"gap-patch"},n.a.createElement("div",{className:"circle"})),n.a.createElement("div",{className:"circle-clipper right"},n.a.createElement("div",{className:"circle"}))),n.a.createElement("div",{className:"spinner-layer spinner-yellow"},n.a.createElement("div",{className:"circle-clipper left"},n.a.createElement("div",{className:"circle"})),n.a.createElement("div",{className:"gap-patch"},n.a.createElement("div",{className:"circle"})),n.a.createElement("div",{className:"circle-clipper right"},n.a.createElement("div",{className:"circle"}))),n.a.createElement("div",{className:"spinner-layer spinner-green"},n.a.createElement("div",{className:"circle-clipper left"},n.a.createElement("div",{className:"circle"})),n.a.createElement("div",{className:"gap-patch"},n.a.createElement("div",{className:"circle"})),n.a.createElement("div",{className:"circle-clipper right"},n.a.createElement("div",{className:"circle"}))))))}}]),t}(l.Component),x=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(u.a,null,n.a.createElement("switch",null,n.a.createElement(p.a,{exact:!0,path:"/",component:S}),n.a.createElement(p.a,{path:"/Saved",component:A}))))}}]),t}(l.Component),Y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function I(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(n.a.createElement(x,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");Y?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):I(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):I(e)})}}()}},[[26,2,1]]]);
//# sourceMappingURL=main.b73623ec.chunk.js.map